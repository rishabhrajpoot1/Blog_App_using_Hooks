{"ast":null,"code":"var _jsxFileName = \"/Users/rishabh/Documents/Blog_App_using_Hooks/src/components/CommentBox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport Comments from './Comments';\nimport UserContext from '../context/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction CommentBox(props) {\n  _s();\n\n  var _info$data, _info$data$user;\n\n  const [inputText, setInputText] = useState('');\n  const [comments, setComents] = useState('');\n  const info = useContext(UserContext);\n  let slug = props.slug;\n  useEffect(() => {\n    getComments(slug);\n  }, [slug]);\n\n  function handleChange({\n    target\n  }) {\n    let {\n      value\n    } = target;\n    setInputText(value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    let slug = props.slug;\n\n    if (inputText) {\n      fetch(Articles_URL + '/' + slug + '/comments', {\n        method: 'POST',\n        body: JSON.stringify({\n          comment: {\n            body: inputText\n          }\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + localStorage[Local_Storage_Key]\n        }\n      }).then(res => {\n        if (!res.ok) {\n          return res.json().then(({\n            errors\n          }) => {\n            return Promise.reject(errors);\n          });\n        }\n\n        return res.json();\n      }).then(data => {\n        setInputText('');\n        setComents('');\n        getComments(slug);\n      }).catch(err => console.log(err));\n    }\n  }\n\n  function handleDelete({\n    target\n  }) {\n    let {\n      id\n    } = target.dataset;\n    let slug = props.slug;\n    fetch(Articles_URL + '/' + slug + '/comments/' + id, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Token ' + localStorage[Local_Storage_Key]\n      }\n    }).then(res => {\n      if (!res.ok) {\n        return res.json().then(({\n          errors\n        }) => {\n          return Promise.reject(errors);\n        });\n      }\n\n      setComents('');\n      getComments(slug);\n    }).catch(err => console.log(err));\n  }\n\n  function getComments(slug) {\n    fetch(Articles_URL + '/' + slug + '/comments').then(res => {\n      if (!res.ok) {\n        return res.json().then(({\n          errors\n        }) => {\n          return Promise.reject(errors);\n        });\n      }\n\n      return res.json();\n    }).then(({\n      comments\n    }) => {\n      setComents(comments);\n    }).catch(err => console.log(err));\n  }\n\n  let loggedInUser = (_info$data = info.data) === null || _info$data === void 0 ? void 0 : (_info$data$user = _info$data.user) === null || _info$data$user === void 0 ? void 0 : _info$data$user.username;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loggedInUser && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"my-6 flex flex-col w-1/3\",\n        onSubmit: e => handleSubmit(e),\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"w-full border-2 border-gray-400 rounded-md p-3 outline-none focus:border-blue-500\",\n          rows: \"3\",\n          placeholder: \"Enter Comments\",\n          value: inputText,\n          onChange: e => handleChange(e),\n          name: \"inputText\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Add Comment\",\n          className: \"px-2 py-1 shadow-md btn-primary self-end text-white text-xs rounded-md cursor-pointer hover:bg-blue-400 mt-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-8\",\n      children: /*#__PURE__*/_jsxDEV(Comments, {\n        comments: comments,\n        handleDelete: handleDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CommentBox, \"bfk/XUHIwDQW0caOGpk2OImaRuU=\");\n\n_c = CommentBox;\nexport default CommentBox;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentBox\");","map":{"version":3,"sources":["/Users/rishabh/Documents/Blog_App_using_Hooks/src/components/CommentBox.js"],"names":["React","useState","useEffect","useContext","Articles_URL","Local_Storage_Key","Comments","UserContext","CommentBox","props","inputText","setInputText","comments","setComents","info","slug","getComments","handleChange","target","value","handleSubmit","event","preventDefault","fetch","method","body","JSON","stringify","comment","headers","Authorization","localStorage","then","res","ok","json","errors","Promise","reject","data","catch","err","console","log","handleDelete","id","dataset","loggedInUser","user","username","e"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport Comments from './Comments';\nimport UserContext from '../context/UserContext';\n\nfunction CommentBox(props) {\n  const [inputText, setInputText] = useState('');\n  const [comments, setComents] = useState('');\n  const info = useContext(UserContext);\n  let slug = props.slug;\n\n  useEffect(() => {\n    getComments(slug);\n  }, [slug]);\n\n  function handleChange({ target }) {\n    let { value } = target;\n    setInputText(value);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    let slug = props.slug;\n    if (inputText) {\n      fetch(Articles_URL + '/' + slug + '/comments', {\n        method: 'POST',\n        body: JSON.stringify({ comment: { body: inputText } }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + localStorage[Local_Storage_Key],\n        },\n      })\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then(({ errors }) => {\n              return Promise.reject(errors);\n            });\n          }\n          return res.json();\n        })\n        .then((data) => {\n          setInputText('');\n          setComents('');\n          getComments(slug);\n        })\n        .catch((err) => console.log(err));\n    }\n  }\n\n  function handleDelete({ target }) {\n    let { id } = target.dataset;\n    let slug = props.slug;\n    fetch(Articles_URL + '/' + slug + '/comments/' + id, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Token ' + localStorage[Local_Storage_Key],\n      },\n    })\n      .then((res) => {\n        if (!res.ok) {\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        setComents('');\n        getComments(slug);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function getComments(slug) {\n    fetch(Articles_URL + '/' + slug + '/comments')\n      .then((res) => {\n        if (!res.ok) {\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        return res.json();\n      })\n      .then(({ comments }) => {\n        setComents(comments);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  let loggedInUser = info.data?.user?.username;\n  return (\n    <>\n      {loggedInUser && (\n        <div className=\"\">\n          <form\n            className=\"my-6 flex flex-col w-1/3\"\n            onSubmit={(e) => handleSubmit(e)}\n          >\n            <textarea\n              className=\"w-full border-2 border-gray-400 rounded-md p-3 outline-none focus:border-blue-500\"\n              rows=\"3\"\n              placeholder=\"Enter Comments\"\n              value={inputText}\n              onChange={(e) => handleChange(e)}\n              name=\"inputText\"\n            ></textarea>\n            <input\n              type=\"submit\"\n              value=\"Add Comment\"\n              className=\"px-2 py-1 shadow-md btn-primary self-end text-white text-xs rounded-md cursor-pointer hover:bg-blue-400 mt-5\"\n            />\n          </form>\n        </div>\n      )}\n\n      <div className=\"my-8\">\n        <Comments comments={comments} handleDelete={handleDelete} />\n      </div>\n    </>\n  );\n}\n\nexport default CommentBox;\n"]},"metadata":{},"sourceType":"module"}