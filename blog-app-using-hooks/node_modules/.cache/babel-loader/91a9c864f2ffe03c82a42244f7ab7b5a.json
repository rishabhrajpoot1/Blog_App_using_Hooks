{"ast":null,"code":"import _slicedToArray from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import Loader from'./Loader';import{Link,withRouter}from'react-router-dom';import{Articles_URL,Local_Storage_Key}from'../utilities/constants';import CommentBox from'./CommentBox';import ReactMarkdown from'react-markdown';import remarkGfm from'remark-gfm';import UserContext from'../context/UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Article(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var info=useContext(UserContext);var slug=props.match.params.slug;useEffect(function(){function getArticle(){fetch(Articles_URL+\"/\".concat(slug)).then(function(res){if(!res.ok){throw new Error(res.statusText);}return res.json();}).then(function(data){setArticle(data.article);}).catch(function(err){setError('Not able to fetch Articles');});}getArticle();},[slug]);function getDate(date){var newDate=new Date(date).toISOString().split('T')[0];return newDate;}function handleEdit(slug){props.history.push({pathname:\"/articles/edit/\".concat(slug),article:article});}function handleDelete(){var user=info.data.user;fetch(Articles_URL+'/'+slug,{method:'DELETE',headers:{Authorization:'Bearer '+localStorage[Local_Storage_Key]}}).then(function(res){if(!res.ok){return res.json().then(function(_ref){var errors=_ref.errors;return Promise.reject(errors);});}props.history.push(\"/profiles/\".concat(user.username));}).catch(function(err){return console.log(err);});}var _info$data=info.data,isLoggedIn=_info$data.isLoggedIn,user=_info$data.user;if(error){return/*#__PURE__*/_jsx(\"h2\",{className:\"text-red-500 text-center text-xl mt-8\",children:error});}if(!article){return/*#__PURE__*/_jsx(Loader,{});}var tagList=article.tagList;return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"px-20 bg-gray-400 py-12 md:flex items-center rounded-md shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex py-6 items-center flex-col mr-20\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profiles/\".concat(article.author.username),children:/*#__PURE__*/_jsx(\"img\",{src:article.author.image||'smiley.png',alt:article.author.username,className:\"w-16 h-16 object-cover rounded-full\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-3 text-gray-700 font-bold text-xl\",children:article.author.username}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-3 text-gray-700\",children:getDate(article.createdAt)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col w-5/6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-2 mb-5 text-4xl self-center text-gray-900\",children:article.title}),/*#__PURE__*/_jsx(\"p\",{className:\"self-start text-gray-800 mb-5 overflow-hidden w-full\",children:article.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap items-center\",children:tagList.map(function(tag){if(!tag){return null;}else{return/*#__PURE__*/_jsx(\"span\",{className:\"mr-3 mb-3 bg-gray-700 p-1 px-2 text-xs rounded-md text-white\",children:tag},tag);}})}),isLoggedIn&&user.username===article.author.username&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:'btn bg-gray-300 text-gray-600 rounded-md mx-3 mb-3 cursor-pointer',onClick:function onClick(){return handleEdit(article.slug);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-edit mr-2\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"span\",{className:'btn bg-gray-300 text-gray-600 rounded-md mx-3 mb-3 cursor-pointer',onClick:handleDelete,children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-trash-alt mr-2\"}),\"Delete\"]})]})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg text-gray-700 px-20 py-12 border w-full overflow-hidden\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:article.body,remarkPlugins:[remarkGfm]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-20 py-12\",children:[/*#__PURE__*/_jsx(CommentBox,{slug:article.slug}),!user&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-10 mb-5\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl text-gray-600\",children:[\"Please\",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-green-700 mx-1\",children:\"Login\"}),\"to Add Comments on the Article\"]})})]})]})]});}export default withRouter(Article);","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/Article.js"],"names":["React","useState","useContext","useEffect","Loader","Link","withRouter","Articles_URL","Local_Storage_Key","CommentBox","ReactMarkdown","remarkGfm","UserContext","Article","props","article","setArticle","error","setError","info","slug","match","params","getArticle","fetch","then","res","ok","Error","statusText","json","data","catch","err","getDate","date","newDate","Date","toISOString","split","handleEdit","history","push","pathname","handleDelete","user","method","headers","Authorization","localStorage","errors","Promise","reject","username","console","log","isLoggedIn","tagList","author","image","createdAt","title","description","map","tag","body"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport Loader from './Loader';\nimport { Link, withRouter } from 'react-router-dom';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport CommentBox from './CommentBox';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport UserContext from '../context/UserContext';\n\nfunction Article(props) {\n  const [article, setArticle] = useState(null);\n  const [error, setError] = useState('');\n  const info = useContext(UserContext);\n  let slug = props.match.params.slug;\n  useEffect(() => {\n    function getArticle() {\n      fetch(Articles_URL + `/${slug}`)\n        .then((res) => {\n          if (!res.ok) {\n            throw new Error(res.statusText);\n          }\n          return res.json();\n        })\n        .then((data) => {\n          setArticle(data.article);\n        })\n        .catch((err) => {\n          setError('Not able to fetch Articles');\n        });\n    }\n    getArticle();\n  }, [slug]);\n\n  function getDate(date) {\n    let newDate = new Date(date).toISOString().split('T')[0];\n    return newDate;\n  }\n  function handleEdit(slug) {\n    props.history.push({\n      pathname: `/articles/edit/${slug}`,\n      article: article,\n    });\n  }\n\n  function handleDelete() {\n    let { user } = info.data;\n    fetch(Articles_URL + '/' + slug, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + localStorage[Local_Storage_Key],\n      },\n    })\n      .then((res) => {\n        if (!res.ok) {\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        props.history.push(`/profiles/${user.username}`);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  let { isLoggedIn, user } = info.data;\n  if (error) {\n    return <h2 className=\"text-red-500 text-center text-xl mt-8\">{error}</h2>;\n  }\n  if (!article) {\n    return <Loader />;\n  }\n  let { tagList } = article;\n\n  return (\n    <main>\n      {/* hero section */}\n      <section className=\"px-20 bg-gray-400 py-12 md:flex items-center rounded-md shadow-md\">\n        <div className=\"flex py-6 items-center flex-col mr-20\">\n          <Link to={`/profiles/${article.author.username}`}>\n            <img\n              src={article.author.image || 'smiley.png'}\n              alt={article.author.username}\n              className=\"w-16 h-16 object-cover rounded-full\"\n            />\n          </Link>\n          <span className=\"mx-3 text-gray-700 font-bold text-xl\">\n            {article.author.username}\n          </span>\n          <span className=\"mx-3 text-gray-700\">\n            {getDate(article.createdAt)}\n          </span>\n        </div>\n        <div className=\"flex flex-col w-5/6\">\n          <h2 className=\"mt-2 mb-5 text-4xl self-center text-gray-900\">\n            {article.title}\n          </h2>\n          <p className=\"self-start text-gray-800 mb-5 overflow-hidden w-full\">\n            {article.description}\n          </p>\n          <div className=\"flex justify-between\">\n            <div className=\"flex flex-wrap items-center\">\n              {tagList.map((tag) => {\n                if (!tag) {\n                  return null;\n                } else {\n                  return (\n                    <span\n                      key={tag}\n                      className=\"mr-3 mb-3 bg-gray-700 p-1 px-2 text-xs rounded-md text-white\"\n                    >\n                      {tag}\n                    </span>\n                  );\n                }\n              })}\n            </div>\n            {isLoggedIn && user.username === article.author.username && (\n              <div className=\"flex flex-wrap items-center\">\n                <span\n                  className={\n                    'btn bg-gray-300 text-gray-600 rounded-md mx-3 mb-3 cursor-pointer'\n                  }\n                  onClick={() => handleEdit(article.slug)}\n                >\n                  <i className=\"far fa-edit mr-2\"></i> Edit\n                </span>\n\n                <span\n                  className={\n                    'btn bg-gray-300 text-gray-600 rounded-md mx-3 mb-3 cursor-pointer'\n                  }\n                  onClick={handleDelete}\n                >\n                  <i className=\"far fa-trash-alt mr-2\"></i>Delete\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n      </section>\n\n      {/* article body */}\n      <section className=\"bg-gray-100\">\n        <div className=\"text-lg text-gray-700 px-20 py-12 border w-full overflow-hidden\">\n          <ReactMarkdown children={article.body} remarkPlugins={[remarkGfm]} />\n        </div>\n        <div className=\"px-20 py-12\">\n          <CommentBox slug={article.slug} />\n          {!user && (\n            <div className=\"flex justify-center mt-10 mb-5\">\n              <h3 className=\"text-xl text-gray-600\">\n                Please\n                <Link to=\"/login\" className=\"text-green-700 mx-1\">\n                  Login\n                </Link>\n                to Add Comments on the Article\n              </h3>\n            </div>\n          )}\n        </div>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(Article);\n"]},"metadata":{},"sourceType":"module"}