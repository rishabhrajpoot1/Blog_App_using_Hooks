{"ast":null,"code":"import _defineProperty from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{withRouter}from'react-router';import{Articles_URL,Local_Storage_Key}from'../utilities/constants';import MarkdownIt from'markdown-it';import MdEditor from'react-markdown-editor-lite';// import style manually\nimport'react-markdown-editor-lite/lib/index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewArticle(props){var _useState=useState({title:'',description:'',tags:'',body:'',error:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];function handleChange(_ref){var target=_ref.target;var name=target.name,value=target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));}function handleSubmit(event){var title=state.title,description=state.description,tags=state.tags,body=state.body;tags=tags.split(',').map(function(tag){return tag.trim();});var token=localStorage[Local_Storage_Key];event.preventDefault();if(title&&description&&tags&&body){fetch(Articles_URL,{method:'POST',headers:{'Content-type':'application/json',authorization:\"Bearer \".concat(token)},body:JSON.stringify({article:{title:title,description:description,tagList:tags,body:body}})}).then(function(res){if(!res.ok){return res.json().then(function(_ref2){var errors=_ref2.errors;return Promise.reject(errors);});}return res.json();}).then(function(data){// console.log(data);\nprops.history.push(\"/articles/\".concat(data.article.slug));}).catch(function(err){// console.log(err);\nsetState(_objectSpread(_objectSpread({},state),{},{error:'Enter all fields'}));});}else{setState({title:'',description:'',body:'',tags:'',error:''});}}function handleEditorChange(_ref3){var html=_ref3.html,text=_ref3.text;setState(_objectSpread(_objectSpread({},state),{},{body:text}));}function clearEditor(_ref4){var html=_ref4.html,text=_ref4.text;return html='';}var mdParser=new MarkdownIt();return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-2/4 mx-auto mt-10\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"text\",placeholder:\"Enter Title\",value:state.title,name:\"title\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"text\",placeholder:\"Enter Description\",value:state.description,name:\"description\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"text\",placeholder:\"Enter Tags\",value:state.tags,name:\"tags\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(MdEditor,{style:{height:'500px'},renderHTML:function renderHTML(text){return mdParser.render(text);},onChange:handleEditorChange,onSubmit:clearEditor}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Publish Article\",className:\"block float-right btn bg-green-500 text-white font-bold cursor-pointer mt-10\"})]})})});}export default withRouter(NewArticle);","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/New-Article.js"],"names":["React","useState","withRouter","Articles_URL","Local_Storage_Key","MarkdownIt","MdEditor","NewArticle","props","title","description","tags","body","error","state","setState","handleChange","target","name","value","handleSubmit","event","split","map","tag","trim","token","localStorage","preventDefault","fetch","method","headers","authorization","JSON","stringify","article","tagList","then","res","ok","json","errors","Promise","reject","data","history","push","slug","catch","err","handleEditorChange","html","text","clearEditor","mdParser","e","height","render"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { withRouter } from 'react-router';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport MarkdownIt from 'markdown-it';\nimport MdEditor from 'react-markdown-editor-lite';\n// import style manually\nimport 'react-markdown-editor-lite/lib/index.css';\n\nfunction NewArticle(props) {\n  const [state, setState] = useState({\n    title: '',\n    description: '',\n    tags: '',\n    body: '',\n    error: '',\n  });\n  function handleChange({ target }) {\n    let { name, value } = target;\n    setState({ ...state, [name]: value });\n  }\n\n  function handleSubmit(event) {\n    let { title, description, tags, body } = state;\n    tags = tags.split(',').map((tag) => tag.trim());\n    let token = localStorage[Local_Storage_Key];\n    event.preventDefault();\n    if (title && description && tags && body) {\n      fetch(Articles_URL, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          article: { title, description, tagList: tags, body },\n        }),\n      })\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then(({ errors }) => {\n              return Promise.reject(errors);\n            });\n          }\n          return res.json();\n        })\n        .then((data) => {\n          // console.log(data);\n          props.history.push(`/articles/${data.article.slug}`);\n        })\n        .catch((err) => {\n          // console.log(err);\n          setState({\n            ...state,\n            error: 'Enter all fields',\n          });\n        });\n    } else {\n      setState({\n        title: '',\n        description: '',\n        body: '',\n        tags: '',\n        error: '',\n      });\n    }\n  }\n  function handleEditorChange({ html, text }) {\n    setState({ ...state, body: text });\n  }\n  function clearEditor({ html, text }) {\n    return (html = '');\n  }\n\n  const mdParser = new MarkdownIt();\n  return (\n    <main>\n      <section>\n        <form className=\"w-2/4 mx-auto mt-10\" onSubmit={handleSubmit}>\n          <input\n            className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n            type=\"text\"\n            placeholder=\"Enter Title\"\n            value={state.title}\n            name=\"title\"\n            onChange={(e) => handleChange(e)}\n          ></input>\n          <input\n            className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n            type=\"text\"\n            placeholder=\"Enter Description\"\n            value={state.description}\n            name=\"description\"\n            onChange={(e) => handleChange(e)}\n          ></input>\n          <input\n            className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n            type=\"text\"\n            placeholder=\"Enter Tags\"\n            value={state.tags}\n            name=\"tags\"\n            onChange={(e) => handleChange(e)}\n          ></input>\n          <MdEditor\n            style={{ height: '500px' }}\n            renderHTML={(text) => mdParser.render(text)}\n            onChange={handleEditorChange}\n            onSubmit={clearEditor}\n          />\n          <input\n            type=\"submit\"\n            value=\"Publish Article\"\n            className=\"block float-right btn bg-green-500 text-white font-bold cursor-pointer mt-10\"\n          />\n        </form>\n      </section>\n    </main>\n  );\n}\nexport default withRouter(NewArticle);\n"]},"metadata":{},"sourceType":"module"}