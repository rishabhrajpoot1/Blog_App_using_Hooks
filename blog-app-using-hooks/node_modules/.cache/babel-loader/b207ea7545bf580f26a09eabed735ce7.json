{"ast":null,"code":"var _jsxFileName = \"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/Settings.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { validations } from '../utilities/validations';\nimport { Local_Storage_Key, User_Verify_URL } from '../utilities/constants';\nimport { withRouter } from 'react-router';\nimport Loader from './Loader';\nimport UserContext from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Settings(props) {\n  _s();\n\n  // constructor(props) {\n  //   super();\n  //   state = {\n  //     image: \"\",\n  //     username: \"\",\n  //     email: \"\",\n  //     password: '',\n  //     bio: \"\",\n  //     errors: {\n  //       username: '',\n  //       email: '',\n  //       password: '',\n  //     },\n  //   };\n  // }\n  const [state, setState] = useState({\n    image: \"\",\n    username: \"\",\n    password: '',\n    bio: \"\",\n    errors: {\n      username: '',\n      password: ''\n    }\n  });\n  const info = useContext(UserContext);\n  useEffect(() => {\n    let {\n      image,\n      username,\n      bio\n    } = info.data.user;\n    setState(state => {\n      return { ...state,\n        image,\n        username,\n        bio\n      };\n    });\n  }, [info.data]);\n\n  function handleChange({\n    target\n  }) {\n    let {\n      name,\n      value\n    } = target;\n    let errors = state.errors;\n    validations(errors, name, value);\n    setState({ ...state,\n      [name]: value,\n      errors\n    });\n  }\n\n  ;\n\n  function handleSubmit(event) {\n    let {\n      username,\n      image,\n      password,\n      bio,\n      errors\n    } = state;\n    event.preventDefault();\n\n    if (username && image && password && bio) {\n      fetch(User_Verify_URL, {\n        method: 'PUT',\n        body: JSON.stringify({\n          user: {\n            username,\n            password,\n            bio,\n            image\n          }\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + localStorage[Local_Storage_Key]\n        }\n      }).then(res => {\n        // console.log(res);\n        if (!res.ok) {\n          return res.json().then(data => {\n            for (let key in data.errors) {\n              errors[key] = `${key} ${data.errors[key]}`;\n            }\n\n            return Promise.reject({\n              errors\n            });\n          });\n        }\n\n        return res.json();\n      }).then(data => {\n        props.history.push(`/profiles/${data.user.username}`);\n      }).catch(err => setState({ ...state,\n        errors\n      }));\n    }\n  }\n\n  ;\n\n  if (!state.username && !state.image && !state.bio) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 14\n    }, this);\n  }\n\n  let {\n    username,\n    password\n  } = state.errors;\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-20\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"w-1/2 mx-auto p-8 border border-gray-400 rounded-md\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n          className: \"text-center text-3xl my-2 font-bold\",\n          children: \"Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Image Url\",\n            value: state.image,\n            onChange: handleChange,\n            name: \"image\",\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"username\",\n            value: state.username,\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"my-1 text-red-500\",\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            value: state.password,\n            placeholder: \"Password\",\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"my-1 text-red-500\",\n            children: password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: state.bio,\n            rows: \"6\",\n            name: \"bio\",\n            placeholder: \"Enter your Bio\",\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Update\",\n            className: \"btn btn-green\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Settings, \"xa333AFW/FyMKobL9DnEHYUpLxg=\");\n\n_c = Settings;\n;\nexport default _c2 = withRouter(Settings);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Settings\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/Settings.js"],"names":["React","useState","useEffect","useContext","validations","Local_Storage_Key","User_Verify_URL","withRouter","Loader","UserContext","Settings","props","state","setState","image","username","password","bio","errors","info","data","user","handleChange","target","name","value","handleSubmit","event","preventDefault","fetch","method","body","JSON","stringify","headers","Authorization","localStorage","then","res","ok","json","key","Promise","reject","history","push","catch","err"],"mappings":"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","sourcesContent":["import React,{useState, useEffect,useContext} from 'react';\nimport { validations } from '../utilities/validations';\nimport { Local_Storage_Key, User_Verify_URL } from '../utilities/constants';\nimport { withRouter } from 'react-router';\nimport Loader from './Loader';\nimport UserContext from \"../context/UserContext\";\n\nfunction Settings (props) {\n  // constructor(props) {\n  //   super();\n  //   state = {\n  //     image: \"\",\n  //     username: \"\",\n  //     email: \"\",\n  //     password: '',\n  //     bio: \"\",\n  //     errors: {\n  //       username: '',\n  //       email: '',\n  //       password: '',\n  //     },\n  //   };\n  // }\n  const [state, setState] = useState({\n      image: \"\",\n      username: \"\",\n      password: '',\n      bio: \"\",\n      errors: {\n        username: '',\n        password: '',\n      },\n  })\n  const info = useContext(UserContext);\n\n  useEffect(() => {\n      let {image, username, bio} = info.data.user;\n      setState(state => {\n        return {...state, image, username, bio}}\n  )}, [info.data])\n\n  function handleChange ({ target }) {\n    let { name, value } = target;\n    let  errors  = state.errors;\n    validations(errors, name, value);\n    setState({...state, [name]: value, errors });\n  };\n\n  function handleSubmit (event) {\n    let { username, image, password, bio, errors } = state;\n    event.preventDefault();\n    if (username && image && password && bio) {\n      fetch(User_Verify_URL, {\n        method: 'PUT',\n        body: JSON.stringify({\n          user: { username, password, bio, image },\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + localStorage[Local_Storage_Key],\n        },\n      })\n        .then((res) => {\n          // console.log(res);\n          if (!res.ok) {\n            return res.json().then((data) => {\n              for (let key in data.errors) {\n                errors[key] = `${key} ${data.errors[key]}`;\n              }\n              return Promise.reject({ errors });\n            });\n          }\n          return res.json();\n        })\n        .then((data) => {\n          props.history.push(`/profiles/${data.user.username}`);\n        })\n        .catch((err) => setState({...state, errors }));\n    }\n  };\n\n    if(!state.username && !state.image && !state.bio) {\n      return < Loader />\n  }\n    let { username, password } = state.errors;\n\n    return (\n      <main>\n        <section className=\"py-20\">\n          <form\n            className=\"w-1/2 mx-auto p-8 border border-gray-400 rounded-md\"\n            onSubmit={handleSubmit}\n          >\n            <legend className=\"text-center text-3xl my-2 font-bold\">\n              Settings\n            </legend>\n            <fieldset className=\"flex flex-col\">\n              <input\n                type=\"text\"\n                placeholder=\"Image Url\"\n                value={state.image}\n                onChange={handleChange}\n                name=\"image\"\n                className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n              />\n\n              <input\n                type=\"text\"\n                name=\"username\"\n                value={state.username}\n                onChange={handleChange}\n                className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n              />\n              <span className=\"my-1 text-red-500\">{username}</span>\n\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={state.password}\n                placeholder=\"Password\"\n                onChange={handleChange}\n                className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n              />\n              <span className=\"my-1 text-red-500\">{password}</span>\n\n              <textarea\n                value={state.bio}\n                rows=\"6\"\n                name=\"bio\"\n                placeholder=\"Enter your Bio\"\n                onChange={handleChange}\n                className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n              ></textarea>\n\n              <input\n                type=\"submit\"\n                value=\"Update\"\n                className=\"btn btn-green\"\n              ></input>\n            </fieldset>\n          </form>\n        </section>\n      </main>\n    );\n  };\n\nexport default withRouter(Settings);\n"]},"metadata":{},"sourceType":"module"}