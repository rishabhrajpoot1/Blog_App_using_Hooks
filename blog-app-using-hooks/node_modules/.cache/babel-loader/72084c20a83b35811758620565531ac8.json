{"ast":null,"code":"var _jsxFileName = \"/Users/rishabh/Documents/Blog_App_using_Hooks/src/components/UpdateArticle.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport { withRouter } from 'react-router';\nimport Loader from './Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UpdateArticle(props) {\n  _s();\n\n  const [state, setState] = useState({\n    article: '',\n    title: '',\n    description: '',\n    body: '',\n    tags: '',\n    error: ''\n  });\n  let slug = props.match.params.slug;\n  useEffect(() => {\n    fetch(Articles_URL + `/${slug}`).then(res => {\n      if (!res.ok) {\n        throw new Error(res.statusText);\n      }\n\n      return res.json();\n    }).then(({\n      article\n    }) => {\n      let {\n        title,\n        description,\n        tagList,\n        body\n      } = article;\n      setState(state => {\n        return { ...state,\n          article: article,\n          title: title,\n          body: body,\n          description: description,\n          tags: tagList.join(',')\n        };\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    return () => {};\n  }, [slug]);\n\n  function handleChange({\n    target\n  }) {\n    let {\n      name,\n      value\n    } = target;\n    setState({ ...state,\n      [name]: value\n    });\n  }\n\n  function handleSubmit(event) {\n    let {\n      title,\n      description,\n      body,\n      tags\n    } = state;\n    let token = 'Bearer ' + localStorage[Local_Storage_Key];\n    event.preventDefault();\n\n    if (title && description && body && tags) {\n      fetch(Articles_URL + '/' + slug, {\n        method: 'PUT',\n        body: JSON.stringify({\n          article: {\n            title,\n            description,\n            body,\n            tagList: tags.split(',').map(tag => tag.trim())\n          }\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token\n        }\n      }).then(res => {\n        if (!res.ok) {\n          return res.json().then(({\n            errors\n          }) => {\n            return Promise.reject(errors);\n          });\n        }\n\n        return res.json();\n      }).then(data => {\n        props.history.push(`/articles/${props.match.params.slug}`);\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      setState({ ...state,\n        error: 'Enter all fields'\n      });\n    }\n  }\n\n  let {\n    title,\n    description,\n    body,\n    tags,\n    error,\n    article\n  } = state;\n\n  if (!article) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"pt-20\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"w-1/2 mx-auto p-8 border border-gray-400 rounded-md\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n          className: \"text-3xl text-center font-bold my-3 text-indigo-900\",\n          children: \"Edit Article\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-500 my-1\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: title,\n            placeholder: \"Title\",\n            name: \"title\",\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: description,\n            name: \"description\",\n            placeholder: \"Description\",\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            rows: \"6\",\n            value: body,\n            name: \"body\",\n            placeholder: \"Articles's Body\",\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: tags,\n            name: \"tags\",\n            placeholder: \"Tag List(comma seperated)\",\n            onChange: handleChange,\n            className: \"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Update Article\",\n            className: \"btn w-2/6 self-end bg-blue-500 hover:bg-blue-400 text-white \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UpdateArticle, \"jKTp9AhlwF5tc3dRf3xHE9yAE0w=\");\n\n_c = UpdateArticle;\nexport default _c2 = withRouter(UpdateArticle);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UpdateArticle\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/rishabh/Documents/Blog_App_using_Hooks/src/components/UpdateArticle.js"],"names":["React","useState","useEffect","Articles_URL","Local_Storage_Key","withRouter","Loader","UpdateArticle","props","state","setState","article","title","description","body","tags","error","slug","match","params","fetch","then","res","ok","Error","statusText","json","tagList","join","catch","err","console","log","handleChange","target","name","value","handleSubmit","event","token","localStorage","preventDefault","method","JSON","stringify","split","map","tag","trim","headers","Authorization","errors","Promise","reject","data","history","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport { withRouter } from 'react-router';\nimport Loader from './Loader';\n\nfunction UpdateArticle(props) {\n  const [state, setState] = useState({\n    article: '',\n    title: '',\n    description: '',\n    body: '',\n    tags: '',\n    error: '',\n  });\n\n  let slug = props.match.params.slug;\n  useEffect(() => {\n    fetch(Articles_URL + `/${slug}`)\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(res.statusText);\n        }\n        return res.json();\n      })\n      .then(({ article }) => {\n        let { title, description, tagList, body } = article;\n        setState((state) => {\n          return {\n            ...state,\n            article: article,\n            title: title,\n            body: body,\n            description: description,\n            tags: tagList.join(','),\n          };\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    return () => {};\n  }, [slug]);\n\n  function handleChange({ target }) {\n    let { name, value } = target;\n    setState({ ...state, [name]: value });\n  }\n\n  function handleSubmit(event) {\n    let { title, description, body, tags } = state;\n    let token = 'Bearer ' + localStorage[Local_Storage_Key];\n    event.preventDefault();\n    if (title && description && body && tags) {\n      fetch(Articles_URL + '/' + slug, {\n        method: 'PUT',\n        body: JSON.stringify({\n          article: {\n            title,\n            description,\n            body,\n            tagList: tags.split(',').map((tag) => tag.trim()),\n          },\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token,\n        },\n      })\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then(({ errors }) => {\n              return Promise.reject(errors);\n            });\n          }\n          return res.json();\n        })\n        .then((data) => {\n          props.history.push(`/articles/${props.match.params.slug}`);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      setState({ ...state, error: 'Enter all fields' });\n    }\n  }\n\n  let { title, description, body, tags, error, article } = state;\n  if (!article) {\n    return <Loader />;\n  }\n  return (\n    <main>\n      <section className=\"pt-20\">\n        <form\n          className=\"w-1/2 mx-auto p-8 border border-gray-400 rounded-md\"\n          onSubmit={handleSubmit}\n        >\n          <legend className=\"text-3xl text-center font-bold my-3 text-indigo-900\">\n            Edit Article\n          </legend>\n          <fieldset className=\"flex flex-col\">\n            <span className=\"text-red-500 my-1\">{error}</span>\n            <input\n              type=\"text\"\n              value={title}\n              placeholder=\"Title\"\n              name=\"title\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            />\n            <input\n              type=\"text\"\n              value={description}\n              name=\"description\"\n              placeholder=\"Description\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            />\n            <textarea\n              rows=\"6\"\n              value={body}\n              name=\"body\"\n              placeholder=\"Articles's Body\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            ></textarea>\n            <input\n              type=\"text\"\n              value={tags}\n              name=\"tags\"\n              placeholder=\"Tag List(comma seperated)\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Update Article\"\n              className=\"btn w-2/6 self-end bg-blue-500 hover:bg-blue-400 text-white \"\n            />\n          </fieldset>\n        </form>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(UpdateArticle);\n"]},"metadata":{},"sourceType":"module"}