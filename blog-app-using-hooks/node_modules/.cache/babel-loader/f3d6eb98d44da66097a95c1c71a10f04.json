{"ast":null,"code":"import _objectSpread from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link}from'react-router-dom';import{validations}from'../utilities/validations';import{Login_URL}from'../utilities/constants';import{withRouter}from'react-router';import UserContext from'../context/UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({email:'',password:''}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var info=useContext(UserContext);function handleChange(_ref){var target=_ref.target;var name=target.name,value=target.value;if(name==='email'){validations(errors,name,value);if(!errors){setErrors(_objectSpread(_objectSpread({},errors),{},{email:errors}));}else{setEmail(value);}}else if(name==='password'){validations(errors,name,value);if(!errors){setErrors(_objectSpread(_objectSpread({},errors),{},{password:errors}));}else{setPassword(value);}}}function handleSubmit(event){event.preventDefault();if(password&&email){fetch(Login_URL,{method:'POST',headers:{'Content-type':'application/json; charset=UTF-8'},body:JSON.stringify({user:{password:password,email:email}})}).then(function(res){if(!res.ok){return res.json().then(function(_ref2){var errors=_ref2.errors;return Promise.reject(errors);});}return res.json();}).then(function(_ref3){var user=_ref3.user;info.handleUser(user);setEmail('');setPassword('');props.history.push('/articles');}).catch(function(error){setErrors(_objectSpread(_objectSpread({},errors),{},{email:'Email or Password is incorrect!'}));});}}return/*#__PURE__*/_jsx(\"main\",{className:\"bg-gray-300 pb-20\",children:/*#__PURE__*/_jsx(\"section\",{className:\"py-20\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-1/3 mx-auto border border-gray-400 p-6 rounded-md shadow-md\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"legend\",{className:\"text-2xl font-bold\",children:\"Sign In\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700 text-lg text-center\",children:[' ',\"New here?\",' ']})})]}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"text\",placeholder:\"Enter Email\",value:email,name:\"email\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:errors.email}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"password\",placeholder:\"Enter Password\",value:password,name:\"password\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:errors.password}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Log In\",className:\"block w-full my-6 py-2 px-3 btn btn-primary cursor-pointer\",disabled:errors.password||errors.email})]})]})})});}export default withRouter(Login);","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/Log-In.js"],"names":["React","useState","useContext","Link","validations","Login_URL","withRouter","UserContext","Login","props","email","setEmail","password","setPassword","errors","setErrors","info","handleChange","target","name","value","handleSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","res","ok","json","Promise","reject","handleUser","history","push","catch","error","e"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { validations } from '../utilities/validations';\nimport { Login_URL } from '../utilities/constants';\nimport { withRouter } from 'react-router';\nimport UserContext from '../context/UserContext';\n\nfunction Login(props) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errors, setErrors] = useState({ email: '', password: '' });\n  const info = useContext(UserContext);\n\n  function handleChange({ target }) {\n    let { name, value } = target;\n    if (name === 'email') {\n      validations(errors, name, value);\n      if (!errors) {\n        setErrors({ ...errors, email: errors });\n      } else {\n        setEmail(value);\n      }\n    } else if (name === 'password') {\n      validations(errors, name, value);\n      if (!errors) {\n        setErrors({ ...errors, password: errors });\n      } else {\n        setPassword(value);\n      }\n    }\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (password && email) {\n      fetch(Login_URL, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8',\n        },\n        body: JSON.stringify({ user: { password: password, email } }),\n      })\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then(({ errors }) => {\n              return Promise.reject(errors);\n            });\n          }\n          return res.json();\n        })\n        .then(({ user }) => {\n          info.handleUser(user);\n          setEmail('');\n          setPassword('');\n          props.history.push('/articles');\n        })\n        .catch((error) => {\n          setErrors({ ...errors, email: 'Email or Password is incorrect!' });\n        });\n    }\n  }\n\n  return (\n    <main className=\"bg-gray-300 pb-20\">\n      <section className=\"py-20\">\n        <form\n          className=\"w-1/3 mx-auto border border-gray-400 p-6 rounded-md shadow-md\"\n          onSubmit={handleSubmit}\n        >\n          <div className=\"text-center\">\n            <legend className=\"text-2xl font-bold\">Sign In</legend>\n            <Link to=\"/register\">\n              <span className=\"text-gray-700 text-lg text-center\">\n                {' '}\n                New here?{' '}\n              </span>\n            </Link>\n          </div>\n          <fieldset className=\"my-3\">\n            <input\n              className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n              type=\"text\"\n              placeholder=\"Enter Email\"\n              value={email}\n              name=\"email\"\n              onChange={(e) => handleChange(e)}\n            />\n            <span className=\"text-red-500\">{errors.email}</span>\n\n            <input\n              className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n              type=\"password\"\n              placeholder=\"Enter Password\"\n              value={password}\n              name=\"password\"\n              onChange={(e) => handleChange(e)}\n            />\n            <span className=\"text-red-500\">{errors.password}</span>\n\n            <input\n              type=\"submit\"\n              value=\"Log In\"\n              className=\"block w-full my-6 py-2 px-3 btn btn-primary cursor-pointer\"\n              disabled={errors.password || errors.email}\n            />\n          </fieldset>\n        </form>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}