{"ast":null,"code":"import _classCallCheck from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import Header from'./components/Header';import Home from'./components/Home';import Signup from'./components/Sign-Up';import Login from'./components/Log-In';import ArticlesHome from'./components/ArticlesHome';import Article from'./components/Article';import NewArticle from'./components/New-Article';import Settings from'./components/Settings';import Profile from'./components/Profile';import FullPageLoader from'./components/FullPageLoader';import UpdateArticle from'./components/UpdateArticle';import NotFound from'./components/NotFound';import ErrorBoundary from\"./components/ErrorBoundry\";import{UserProvider}from\"./context/UserContext\";import{Local_Storage_Key,User_Verify_URL}from'./utilities/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoggedIn:false,user:null,isVerifying:true};_this.updateUser=function(user){_this.setState({isLoggedIn:true,user:user,isVerifying:false});localStorage.setItem(Local_Storage_Key,user.token);};_this.handleLogout=function(){_this.setState({isLoggedIn:false,user:null});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var storageKey=localStorage[Local_Storage_Key];if(storageKey){fetch(User_Verify_URL,{method:'GET',headers:{authorization:\"Token \".concat(storageKey)}}).then(function(res){if(res.ok){return res.json();}return res.json().then(function(_ref){var errors=_ref.errors;return Promise.reject(errors);});}).then(function(_ref2){var user=_ref2.user;return _this2.updateUser(user);}).catch(function(errors){return console.log(errors);});}else{this.setState({isVerifying:false});}}},{key:\"render\",value:function render(){if(this.state.isVerifying){console.log('Is Verifying');return/*#__PURE__*/_jsx(FullPageLoader,{});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(UserProvider,{value:{data:this.state,handleUser:this.updateUser,handleLogout:this.handleLogout},children:/*#__PURE__*/_jsxs(ErrorBoundary,{children:[/*#__PURE__*/_jsx(Header,{}),this.state.isLoggedIn?/*#__PURE__*/_jsx(AuthenticatedApp,{}):/*#__PURE__*/_jsx(UnAuthenticatedApp,{})]})})});}}]);return App;}(React.Component);function AuthenticatedApp(props){return/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/articles\",exact:true,children:/*#__PURE__*/_jsx(ArticlesHome,{})}),/*#__PURE__*/_jsx(Route,{path:\"/articles/edit/:slug\",children:/*#__PURE__*/_jsx(UpdateArticle,{})}),/*#__PURE__*/_jsx(Route,{path:\"/articles/:slug\",children:/*#__PURE__*/_jsx(Article,{})}),/*#__PURE__*/_jsx(Route,{path:\"/new-article\",exact:true,children:/*#__PURE__*/_jsx(NewArticle,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",exact:true,children:/*#__PURE__*/_jsx(Settings,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profiles/:id\",exact:true,children:/*#__PURE__*/_jsx(Profile,{user:props.user,isLoggedIn:props.isLoggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(NotFound,{})})]});}function UnAuthenticatedApp(props){return/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",exact:true,children:/*#__PURE__*/_jsx(Signup,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,children:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/articles\",exact:true,children:/*#__PURE__*/_jsx(ArticlesHome,{})}),/*#__PURE__*/_jsx(Route,{path:\"/articles/:slug\",children:/*#__PURE__*/_jsx(Article,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profiles/:id\",exact:true,children:/*#__PURE__*/_jsx(Profile,{user:props.user})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(NotFound,{})})]});}export default App;","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","Header","Home","Signup","Login","ArticlesHome","Article","NewArticle","Settings","Profile","FullPageLoader","UpdateArticle","NotFound","ErrorBoundary","UserProvider","Local_Storage_Key","User_Verify_URL","App","state","isLoggedIn","user","isVerifying","updateUser","setState","localStorage","setItem","token","handleLogout","storageKey","fetch","method","headers","authorization","then","res","ok","json","errors","Promise","reject","catch","console","log","data","handleUser","Component","AuthenticatedApp","props","UnAuthenticatedApp"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Header from './components/Header';\nimport Home from './components/Home';\nimport Signup from './components/Sign-Up';\nimport Login from './components/Log-In';\nimport ArticlesHome from './components/ArticlesHome';\nimport Article from './components/Article';\nimport NewArticle from './components/New-Article';\nimport Settings from './components/Settings';\nimport Profile from './components/Profile';\nimport FullPageLoader from './components/FullPageLoader';\nimport UpdateArticle from './components/UpdateArticle';\nimport NotFound from './components/NotFound';\nimport ErrorBoundary from \"./components/ErrorBoundry\";\nimport {UserProvider} from \"./context/UserContext\";\n\nimport { Local_Storage_Key, User_Verify_URL } from './utilities/constants';\n\nclass App extends React.Component {\n  state = {\n    isLoggedIn: false,\n    user: null,\n    isVerifying: true,\n  };\n\n  componentDidMount() {\n    let storageKey = localStorage[Local_Storage_Key];\n    if (storageKey) {\n      fetch(User_Verify_URL, {\n        method: 'GET',\n        headers: {\n          authorization: `Token ${storageKey}`,\n        },\n      })\n        .then((res) => {\n          if (res.ok) {\n            return res.json();\n          }\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        })\n        .then(({ user }) => this.updateUser(user))\n        .catch((errors) => console.log(errors));\n    } else {\n      this.setState({ isVerifying: false });\n    }\n  }\n  updateUser = (user) => {\n    this.setState({ isLoggedIn: true, user, isVerifying: false });\n    localStorage.setItem(Local_Storage_Key, user.token);\n  };\n  handleLogout = () => {\n    this.setState({ isLoggedIn: false, user: null });\n  };\n\n  render() {\n    if (this.state.isVerifying) {\n      console.log('Is Verifying');\n      return <FullPageLoader />;\n    }\n    return (\n      <Router>\n      <UserProvider value={{data: this.state, handleUser: this.updateUser, handleLogout: this.handleLogout }}>\n        <ErrorBoundary>      \n        <Header />\n        {this.state.isLoggedIn ? (\n          <AuthenticatedApp />\n        ) : (\n          <UnAuthenticatedApp />\n        )}\n        </ErrorBoundary>\n        </UserProvider>\n      </Router>\n    );\n  }\n}\nfunction AuthenticatedApp(props) {\n  return (\n    <Switch>\n      <Route path=\"/\" exact>\n        <Home />\n      </Route>\n      <Route path=\"/articles\" exact>\n        <ArticlesHome />\n      </Route>\n      <Route path=\"/articles/edit/:slug\">\n        <UpdateArticle />\n      </Route>\n      <Route path=\"/articles/:slug\">\n        <Article />\n      </Route>\n      <Route path=\"/new-article\" exact>\n        <NewArticle />\n      </Route>\n      <Route path=\"/settings\" exact>\n        <Settings />\n      </Route>\n      <Route path=\"/profiles/:id\" exact>\n        <Profile user={props.user} isLoggedIn={props.isLoggedIn} />\n      </Route>\n      <Route path=\"*\">\n        <NotFound />\n      </Route>\n    </Switch>\n  );\n}\n\nfunction UnAuthenticatedApp(props) {\n  return (\n    <Switch>\n      <Route path=\"/\" exact>\n        <Home />\n      </Route>\n      <Route path=\"/register\" exact>\n        <Signup />\n      </Route>\n      <Route path=\"/login\" exact>\n        <Login />\n      </Route>\n      <Route path=\"/articles\" exact>\n        <ArticlesHome />\n      </Route>\n      <Route path=\"/articles/:slug\">\n        <Article />\n      </Route>\n      <Route path=\"/profiles/:id\" exact>\n        <Profile user={props.user} />\n      </Route>\n      <Route path=\"*\">\n        <NotFound />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}