{"ast":null,"code":"import _defineProperty from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Articles_URL,Local_Storage_Key}from'../utilities/constants';import{withRouter}from'react-router';import Loader from'./Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateArticle(props){var _useState=useState({article:'',title:'',description:'',body:'',tags:'',error:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var slug=props.match.params.slug;useEffect(function(){fetch(Articles_URL+\"/\".concat(slug)).then(function(res){if(!res.ok){throw new Error(res.statusText);}return res.json();}).then(function(_ref){var article=_ref.article;var title=article.title,description=article.description,tagList=article.tagList,body=article.body;setState(function(state){return _objectSpread(_objectSpread({},state),{},{article:article,title:title,body:body,description:description,tags:tagList.join(',')});});}).catch(function(err){console.log(err);});return function(){};},[slug]);function handleChange(_ref2){var target=_ref2.target;var name=target.name,value=target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));}function handleSubmit(event){var title=state.title,description=state.description,body=state.body,tags=state.tags;var token='Bearer '+localStorage[Local_Storage_Key];event.preventDefault();if(title&&description&&body&&tags){fetch(Articles_URL+'/'+slug,{method:'PUT',body:JSON.stringify({article:{title:title,description:description,body:body,tagList:tags.split(',').map(function(tag){return tag.trim();})}}),headers:{'Content-Type':'application/json',Authorization:token}}).then(function(res){if(!res.ok){return res.json().then(function(_ref3){var errors=_ref3.errors;return Promise.reject(errors);});}return res.json();}).then(function(data){props.history.push(\"/articles/\".concat(props.match.params.slug));}).catch(function(err){console.log(err);});}else{setState(_objectSpread(_objectSpread({},state),{},{error:'Enter all fields'}));}}var title=state.title,description=state.description,body=state.body,tags=state.tags,error=state.error,article=state.article;if(!article){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"section\",{className:\"pt-20\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-1/2 mx-auto p-8 border border-gray-400 rounded-md\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"legend\",{className:\"text-3xl text-center font-bold my-3 text-indigo-900\",children:\"Edit Article\"}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500 my-1\",children:error}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,placeholder:\"Title\",name:\"title\",onChange:handleChange,className:\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:description,name:\"description\",placeholder:\"Description\",onChange:handleChange,className:\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"6\",value:body,name:\"body\",placeholder:\"Articles's Body\",onChange:handleChange,className:\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tags,name:\"tags\",placeholder:\"Tag List(comma seperated)\",onChange:handleChange,className:\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Article\",className:\"btn w-2/6 self-end bg-blue-500 hover:bg-blue-400 text-white \"})]})]})})});}export default withRouter(UpdateArticle);","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/UpdateArticle.js"],"names":["React","useState","useEffect","Articles_URL","Local_Storage_Key","withRouter","Loader","UpdateArticle","props","article","title","description","body","tags","error","state","setState","slug","match","params","fetch","then","res","ok","Error","statusText","json","tagList","join","catch","err","console","log","handleChange","target","name","value","handleSubmit","event","token","localStorage","preventDefault","method","JSON","stringify","split","map","tag","trim","headers","Authorization","errors","Promise","reject","data","history","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Articles_URL, Local_Storage_Key } from '../utilities/constants';\nimport { withRouter } from 'react-router';\nimport Loader from './Loader';\n\nfunction UpdateArticle(props) {\n  const [state, setState] = useState({\n    article: '',\n    title: '',\n    description: '',\n    body: '',\n    tags: '',\n    error: '',\n  });\n\n  let slug = props.match.params.slug;\n  useEffect(() => {\n    fetch(Articles_URL + `/${slug}`)\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(res.statusText);\n        }\n        return res.json();\n      })\n      .then(({ article }) => {\n        let { title, description, tagList, body } = article;\n        setState((state) => {\n          return {\n            ...state,\n            article: article,\n            title: title,\n            body: body,\n            description: description,\n            tags: tagList.join(','),\n          };\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    return () => {};\n  }, [slug]);\n\n  function handleChange({ target }) {\n    let { name, value } = target;\n    setState({ ...state, [name]: value });\n  }\n\n  function handleSubmit(event) {\n    let { title, description, body, tags } = state;\n    let token = 'Bearer ' + localStorage[Local_Storage_Key];\n    event.preventDefault();\n    if (title && description && body && tags) {\n      fetch(Articles_URL + '/' + slug, {\n        method: 'PUT',\n        body: JSON.stringify({\n          article: {\n            title,\n            description,\n            body,\n            tagList: tags.split(',').map((tag) => tag.trim()),\n          },\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token,\n        },\n      })\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then(({ errors }) => {\n              return Promise.reject(errors);\n            });\n          }\n          return res.json();\n        })\n        .then((data) => {\n          props.history.push(`/articles/${props.match.params.slug}`);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      setState({ ...state, error: 'Enter all fields' });\n    }\n  }\n\n  let { title, description, body, tags, error, article } = state;\n  if (!article) {\n    return <Loader />;\n  }\n  return (\n    <main>\n      <section className=\"pt-20\">\n        <form\n          className=\"w-1/2 mx-auto p-8 border border-gray-400 rounded-md\"\n          onSubmit={handleSubmit}\n        >\n          <legend className=\"text-3xl text-center font-bold my-3 text-indigo-900\">\n            Edit Article\n          </legend>\n          <fieldset className=\"flex flex-col\">\n            <span className=\"text-red-500 my-1\">{error}</span>\n            <input\n              type=\"text\"\n              value={title}\n              placeholder=\"Title\"\n              name=\"title\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            />\n            <input\n              type=\"text\"\n              value={description}\n              name=\"description\"\n              placeholder=\"Description\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            />\n            <textarea\n              rows=\"6\"\n              value={body}\n              name=\"body\"\n              placeholder=\"Articles's Body\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            ></textarea>\n            <input\n              type=\"text\"\n              value={tags}\n              name=\"tags\"\n              placeholder=\"Tag List(comma seperated)\"\n              onChange={handleChange}\n              className=\"my-2 p-2 rounded-md outline-none border-2 border-gray-300 focus:border-blue-500\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Update Article\"\n              className=\"btn w-2/6 self-end bg-blue-500 hover:bg-blue-400 text-white \"\n            />\n          </fieldset>\n        </form>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(UpdateArticle);\n"]},"metadata":{},"sourceType":"module"}