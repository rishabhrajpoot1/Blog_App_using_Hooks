{"ast":null,"code":"import _defineProperty from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link}from'react-router-dom';import{Register_URL}from'../utilities/constants';import{validations}from'../utilities/validations';import{withRouter}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(props){var _useState=useState({username:'',email:'',password:'',errors:{username:'',password:'',email:''}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];function handleChange(_ref){var _objectSpread2;var target=_ref.target;var name=target.name,value=target.value;var errors=state.errors;validations(errors,name,value);setState(_objectSpread(_objectSpread({},state),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,value),_defineProperty(_objectSpread2,\"errors\",errors),_objectSpread2)));}function handleSubmit(event){var email=state.email,password=state.password,username=state.username,errors=state.errors;event.preventDefault();if(username&&password&&email){fetch(Register_URL,{method:'POST',headers:{'Content-type':'application/json; charset=UTF-8'},body:JSON.stringify({user:{username:username,password:password,email:email}})}).then(function(res){if(!res.ok){return res.json().then(function(data){for(var key in data.errors){errors[key]=\"\".concat(key,\" \").concat(data.errors[key]);}return Promise.reject(errors);});}return res.json();}).then(function(_ref2){var user=_ref2.user;setState({password:'',email:'',username:'',errors:errors});props.history.push('/login');}).catch(function(errors){return setState(_objectSpread(_objectSpread({},state),{},{errors:errors}));});}}var _state$errors=state.errors,username=_state$errors.username,password=_state$errors.password,email=_state$errors.email;return/*#__PURE__*/_jsx(\"main\",{className:\"bg-gray-300 py-10\",children:/*#__PURE__*/_jsx(\"section\",{className:\"py-20\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-1/3 mx-auto border border-gray-400 p-6 rounded-md shadow-md\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"legend\",{className:\"text-2xl font-bold\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700 text-lg text-center\",children:[\"Already Have an account?\",' ']})})]}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"text\",placeholder:\"Enter Username\",value:state.username,name:\"username\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:username}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"text\",placeholder:\"Enter Email\",value:state.email,name:\"email\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:email}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\",type:\"password\",placeholder:\"Enter Password\",value:state.password,name:\"password\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:password}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Sign Up\",className:\"block w-full btn bg-gray-500 text-white font-bold cursor-pointer\",disabled:username||email||password})]})]})})});}export default withRouter(Signup);","map":{"version":3,"sources":["/Users/rishabh/Desktop/AltCampus/Advanced React/Blog_App_using_Hooks/blog-app-using-hooks/src/components/Sign-Up.js"],"names":["React","useState","Link","Register_URL","validations","withRouter","Signup","props","username","email","password","errors","state","setState","handleChange","target","name","value","handleSubmit","event","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","res","ok","json","data","key","Promise","reject","history","push","catch","e"],"mappings":"qgBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,YAAT,KAA6B,wBAA7B,CACA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,UAAT,KAA2B,cAA3B,C,wFAEA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACrB,cAA0BN,QAAQ,CAAC,CACjCO,QAAQ,CAAE,EADuB,CAEjCC,KAAK,CAAE,EAF0B,CAGjCC,QAAQ,CAAE,EAHuB,CAIjCC,MAAM,CAAE,CACNH,QAAQ,CAAE,EADJ,CAENE,QAAQ,CAAE,EAFJ,CAGND,KAAK,CAAE,EAHD,CAJyB,CAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eAUA,QAASC,CAAAA,YAAT,MAAkC,uBAAVC,CAAAA,MAAU,MAAVA,MAAU,CAChC,GAAMC,CAAAA,IAAN,CAAsBD,MAAtB,CAAMC,IAAN,CAAYC,KAAZ,CAAsBF,MAAtB,CAAYE,KAAZ,CACA,GAAIN,CAAAA,MAAM,CAAGC,KAAK,CAACD,MAAnB,CACAP,WAAW,CAACO,MAAD,CAASK,IAAT,CAAeC,KAAf,CAAX,CACAJ,QAAQ,gCAAMD,KAAN,uDAAcI,IAAd,CAAqBC,KAArB,0CAA4BN,MAA5B,mBAAR,CACD,CAED,QAASO,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAC3B,GAAMV,CAAAA,KAAN,CAA4CG,KAA5C,CAAMH,KAAN,CAAaC,QAAb,CAA4CE,KAA5C,CAAaF,QAAb,CAAuBF,QAAvB,CAA4CI,KAA5C,CAAuBJ,QAAvB,CAAiCG,MAAjC,CAA4CC,KAA5C,CAAiCD,MAAjC,CACAQ,KAAK,CAACC,cAAN,GACA,GAAIZ,QAAQ,EAAIE,QAAZ,EAAwBD,KAA5B,CAAmC,CACjCY,KAAK,CAAClB,YAAD,CAAe,CAClBmB,MAAM,CAAE,MADU,CAElBC,OAAO,CAAE,CACP,eAAgB,iCADT,CAFS,CAKlBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEC,IAAI,CAAE,CAAEnB,QAAQ,CAARA,QAAF,CAAYE,QAAQ,CAARA,QAAZ,CAAsBD,KAAK,CAALA,KAAtB,CAAR,CAAf,CALY,CAAf,CAAL,CAOGmB,IAPH,CAOQ,SAACC,GAAD,CAAS,CACb,GAAI,CAACA,GAAG,CAACC,EAAT,CAAa,CACX,MAAOD,CAAAA,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,SAACI,IAAD,CAAU,CAC/B,IAAK,GAAIC,CAAAA,GAAT,GAAgBD,CAAAA,IAAI,CAACrB,MAArB,CAA6B,CAC3BA,MAAM,CAACsB,GAAD,CAAN,WAAiBA,GAAjB,aAAwBD,IAAI,CAACrB,MAAL,CAAYsB,GAAZ,CAAxB,EACD,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAexB,MAAf,CAAP,CACD,CALM,CAAP,CAMD,CACD,MAAOkB,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACD,CAjBH,EAkBGH,IAlBH,CAkBQ,eAAc,IAAXD,CAAAA,IAAW,OAAXA,IAAW,CAClBd,QAAQ,CAAC,CAAEH,QAAQ,CAAE,EAAZ,CAAgBD,KAAK,CAAE,EAAvB,CAA2BD,QAAQ,CAAE,EAArC,CAAyCG,MAAM,CAANA,MAAzC,CAAD,CAAR,CACAJ,KAAK,CAAC6B,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACD,CArBH,EAsBGC,KAtBH,CAsBS,SAAC3B,MAAD,QAAYE,CAAAA,QAAQ,gCAAMD,KAAN,MAAaD,MAAM,CAAEA,MAArB,GAApB,EAtBT,EAuBD,CACF,CAED,kBAAoCC,KAAK,CAACD,MAA1C,CAAMH,QAAN,eAAMA,QAAN,CAAgBE,QAAhB,eAAgBA,QAAhB,CAA0BD,KAA1B,eAA0BA,KAA1B,CACA,mBACE,aAAM,SAAS,CAAC,mBAAhB,uBACE,gBAAS,SAAS,CAAC,OAAnB,uBACE,cACE,SAAS,CAAC,+DADZ,CAEE,QAAQ,CAAES,YAFZ,wBAIE,aAAK,SAAS,CAAC,aAAf,wBACE,eAAQ,SAAS,CAAC,oBAAlB,qBADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,uBACE,cAAM,SAAS,CAAC,mCAAhB,sCAC2B,GAD3B,GADF,EAFF,GAJF,cAYE,kBAAU,SAAS,CAAC,MAApB,wBACE,cACE,SAAS,CAAC,+DADZ,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,gBAHd,CAIE,KAAK,CAAEN,KAAK,CAACJ,QAJf,CAKE,IAAI,CAAC,UALP,CAME,QAAQ,CAAE,kBAAC+B,CAAD,QAAOzB,CAAAA,YAAY,CAACyB,CAAD,CAAnB,EANZ,EADF,cASE,aAAM,SAAS,CAAC,cAAhB,UAAgC/B,QAAhC,EATF,cAWE,cACE,SAAS,CAAC,+DADZ,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,aAHd,CAIE,KAAK,CAAEI,KAAK,CAACH,KAJf,CAKE,IAAI,CAAC,OALP,CAME,QAAQ,CAAE,kBAAC8B,CAAD,QAAOzB,CAAAA,YAAY,CAACyB,CAAD,CAAnB,EANZ,EAXF,cAmBE,aAAM,SAAS,CAAC,cAAhB,UAAgC9B,KAAhC,EAnBF,cAqBE,cACE,SAAS,CAAC,+DADZ,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,gBAHd,CAIE,KAAK,CAAEG,KAAK,CAACF,QAJf,CAKE,IAAI,CAAC,UALP,CAME,QAAQ,CAAE,kBAAC6B,CAAD,QAAOzB,CAAAA,YAAY,CAACyB,CAAD,CAAnB,EANZ,EArBF,cA6BE,aAAM,SAAS,CAAC,cAAhB,UAAgC7B,QAAhC,EA7BF,cA+BE,cACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,SAFR,CAGE,SAAS,CAAC,kEAHZ,CAIE,QAAQ,CAAEF,QAAQ,EAAIC,KAAZ,EAAqBC,QAJjC,EA/BF,GAZF,GADF,EADF,EADF,CAyDD,CAED,cAAeL,CAAAA,UAAU,CAACC,MAAD,CAAzB","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Register_URL } from '../utilities/constants';\nimport { validations } from '../utilities/validations';\nimport { withRouter } from 'react-router';\n\nfunction Signup(props) {\n  const [state, setState] = useState({\n    username: '',\n    email: '',\n    password: '',\n    errors: {\n      username: '',\n      password: '',\n      email: '',\n    },\n  });\n  function handleChange({ target }) {\n    let { name, value } = target;\n    let errors = state.errors;\n    validations(errors, name, value);\n    setState({ ...state, [name]: value, errors });\n  }\n\n  function handleSubmit(event) {\n    let { email, password, username, errors } = state;\n    event.preventDefault();\n    if (username && password && email) {\n      fetch(Register_URL, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8',\n        },\n        body: JSON.stringify({ user: { username, password, email } }),\n      })\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then((data) => {\n              for (let key in data.errors) {\n                errors[key] = `${key} ${data.errors[key]}`;\n              }\n              return Promise.reject(errors);\n            });\n          }\n          return res.json();\n        })\n        .then(({ user }) => {\n          setState({ password: '', email: '', username: '', errors });\n          props.history.push('/login');\n        })\n        .catch((errors) => setState({ ...state, errors: errors }));\n    }\n  }\n\n  let { username, password, email } = state.errors;\n  return (\n    <main className=\"bg-gray-300 py-10\">\n      <section className=\"py-20\">\n        <form\n          className=\"w-1/3 mx-auto border border-gray-400 p-6 rounded-md shadow-md\"\n          onSubmit={handleSubmit}\n        >\n          <div className=\"text-center\">\n            <legend className=\"text-2xl font-bold\">Sign Up</legend>\n            <Link to=\"/login\">\n              <span className=\"text-gray-700 text-lg text-center\">\n                Already Have an account?{' '}\n              </span>\n            </Link>\n          </div>\n          <fieldset className=\"my-3\">\n            <input\n              className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n              type=\"text\"\n              placeholder=\"Enter Username\"\n              value={state.username}\n              name=\"username\"\n              onChange={(e) => handleChange(e)}\n            />\n            <span className=\"text-red-500\">{username}</span>\n\n            <input\n              className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n              type=\"text\"\n              placeholder=\"Enter Email\"\n              value={state.email}\n              name=\"email\"\n              onChange={(e) => handleChange(e)}\n            />\n            <span className=\"text-red-500\">{email}</span>\n\n            <input\n              className=\"block w-full my-3 py-2 px-3 border border-gray-400 rounded-md\"\n              type=\"password\"\n              placeholder=\"Enter Password\"\n              value={state.password}\n              name=\"password\"\n              onChange={(e) => handleChange(e)}\n            />\n            <span className=\"text-red-500\">{password}</span>\n\n            <input\n              type=\"submit\"\n              value=\"Sign Up\"\n              className=\"block w-full btn bg-gray-500 text-white font-bold cursor-pointer\"\n              disabled={username || email || password}\n            />\n          </fieldset>\n        </form>\n      </section>\n    </main>\n  );\n}\n\nexport default withRouter(Signup);\n"]},"metadata":{},"sourceType":"module"}